<html><head><title>Majority Element II</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /></head><link href="../../viewer/prism.css" rel="stylesheet" /><link href="../../viewer/styles.css" rel="stylesheet" /><body><h2><a href="https://leetcode.com/problems/majority-element-ii/" target="_blank">Majority Element II</a></h2><div><a href="javascript:history.back()">Back...</a></div><div>&#160;</div><div class="headline">Problem:</div><div>
              <p></p><p>Given an integer array of size <i>n</i>, find all elements that appear more than <code>&#x230A; n/3 &#x230B;</code> times. The algorithm should run in linear time and in O(1) space.</p>

<ol id="hints">
  <li class="hint">How many majority elements could it possibly have?</li>
  <li class="hint">Do you have a better hint? <a href="mailto:admin@leetcode.com?subject=Hints for Majority Element II" target="_blank">Suggest it</a>!</li>
</ol><p></p>
              
                <div>
                  
                </div>
              

              
                <div>
                  <div id="tags" class="btn btn-xs btn-warning"></div>
                  <span class="hidebutton"></span>
                </div>
              

              
                <div>
                  <div id="similar" class="btn btn-xs btn-warning"></div>
                  <span class="hidebutton"></span>
                </div>
              

            </div><div class="headline">Solution:</div><div><a href="#" onclick="showSolution(this)">Show...</a></div><div id="solution"><pre><code class="language-javascript">//
// https://leetcode.com/problems/majority-element-ii/
//

/**
 * @param {number[]} nums
 * @return {number[]}
 */
var majorityElement = function (nums) {
  if (nums.length === 0) return [];

  // Bayer-Moore Majority algorithm
  var candidate1 = 0, candidate2 = 0, count1 = 0, count2 = 0, i = 0;

  for (i = 0; i < nums.length; i++) {
    if (count1 === 0 || candidate1 === nums[i]) {
      count1++;
      candidate1 = nums[i];
    } else if (count2 === 0 || candidate2 === nums[i]) {
      count2++;
      candidate2 = nums[i];
    } else {
      if (count1 !== 0) count1--;
      if (count2 !== 0) count2--;
    }
  }

  count1 = count2 = 0;
  for (i = 0; i < nums.length; i++) {
    if (nums[i] === candidate1) count1++;
    else if (nums[i] === candidate2) count2++;
  }

  var results = [];
  if (count1 > Math.floor(nums.length / 3)) results.push(candidate1);
  if (count2 > Math.floor(nums.length / 3)) results.push(candidate2);

  return results;
};</code></pre></div><footer><span style="float: right;"><a href="https://github.com/floydpink" target="_blank">&copy; Floyd Pink</a></span></footer><script src="../../viewer/prism.js"></script><script src="../../viewer/scripts.js"></script></body></html>